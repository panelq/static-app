!function(s){s.fn.fontselect=function(e){function t(e,t){return function(){return e.apply(t,arguments)}}var n=googleFonts??[],i={style:"font-select",placeholder:"Select Your Font",lookahead:4,api:"https://fonts.googleapis.com/css?family="},o=(a.prototype.bindEvents=function(){s("li",this.$results).click(t(this.activateFont,this)).click(t(this.selectFont,this)),s(".font-select span").click(t(this.toggleDrop,this))},a.prototype.toggleDrop=function(e){this.active?(this.$element.removeClass("font-select-active"),this.$drop.hide(),clearInterval(this.visibleInterval)):(this.$element.addClass("font-select-active"),this.$drop.show(),this.moveToSelected(),this.visibleInterval=setInterval(t(this.getVisibleFonts,this),500)),this.active=!this.active},a.prototype.selectFont=function(){var e=s("li.active",this.$results).data("value");this.$original.val(e).change(),this.updateSelected(),this.toggleDrop()},a.prototype.moveToSelected=function(){var e=this.$original.val(),t=e?s("li[data-value='"+e+"']",this.$results):s("li",this.$results).first();this.$results.scrollTop(t.addClass("active").position().top)},a.prototype.activateFont=function(e){s(".fs-results li.active").removeClass("active"),s(e.currentTarget).addClass("active")},a.prototype.updateSelected=function(){var e=this.$original.val();s("span",this.$element).text(this.toReadable(e)).css(this.toStyle(e))},a.prototype.setupHtml=function(){this.$original.empty().hide(),this.$element=s("<div>",{class:this.options.style}),this.$select=s("<span>"+this.options.placeholder+"</span>"),this.$drop=s("<div>",{class:"fs-drop"}),this.$results=s("<ul>",{class:"fs-results"}),this.$original.after(this.$element.append(this.$select).append(this.$drop)),this.$drop.append(this.$results.append(this.fontsAsHtml())).hide()},a.prototype.fontsAsHtml=function(){for(var e,t,i=n.length,o="",a=0;a<i;a++)e=this.toReadable(n[a]),t=this.toStyle(n[a]),o+='<li data-value="'+n[a]+'" style="font-family: '+t["font-family"]+"; font-weight: "+t["font-weight"]+'">'+e+"</li>";return o},a.prototype.toReadable=function(e){return e.replace(/\+/g," ")},a.prototype.toStyle=function(e){var t=e.split(":");return{"font-family":this.toReadable(t[0]),"font-weight":t[1]||400}},a.prototype.getVisibleFonts=function(){var o,a,n,e;this.$results.is(":hidden")||(a=(o=this).$results.scrollTop(),n=a+this.$results.height(),this.options.lookahead&&(e=s("li",this.$results).first().height(),n+=e*this.options.lookahead),s("li",this.$results).each(function(){var e,t=s(this).position().top+a,i=t+s(this).height();a<=i&&t<=n&&(e=s(this).data("value"),o.addFontLink(e))}))},a.prototype.addFontLink=function(e){var t=this.options.api+e;0===s("link[href*='"+e+"']").length&&s("link:last").after('<link href="'+t+'" rel="stylesheet" type="text/css">')},a);function a(e,t){this.$original=s(e),this.options=t,this.active=!1,this.setupHtml(),this.getVisibleFonts(),this.bindEvents();var i=this.$original.val();i&&(this.updateSelected(),this.addFontLink(i))}return this.each(function(e){return e&&s.extend(i,e),new o(this,i)})}}(jQuery);
